<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Customizable Nonogram Game</title>
  <style>
    table {
      border-collapse: collapse;
    }
    td {
      width: 20px;
      height: 20px;
      border: 1px solid black;
      text-align: center;
    }
    .number-cell {
      background-color: #f0f0f0;
    }
    .number-cell.horizontal {
      display: flex;
      justify-content: flex-start;
      align-items: center;
      padding-left: 5px;
    }
    .number-cell.vertical {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
  </style>
</head>
<body>
  <h1>Customizable Nonogram Game</h1>
  <label for="gridSize">Grid Size:</label>
  <input type="number" id="gridSize" value="5" min="5">
  <button onclick="createGrid()">Create Grid</button>

  <div id="inputArea" style="display: none;">
    <h2>Input Row and Column Hints</h2>
    <label for="rowHints">Row Hints (newline and comma separated ):</label><br>
    <textarea id="rowHints" rows="5" cols="50"></textarea><br>
    <label for="colHints">Column Hints (newline and comma separated):</label><br>
    <textarea id="colHints" rows="5" cols="50"></textarea><br>
    <button onclick="initializeGame()">Initialize Game</button>
  </div>

  <table id="nonogramTable"></table>
  <button onclick="solveNonogram()" style="display: none;" id="solveButton">Solve Nonogram</button>
  
  <script>
    let puzzle, rowHints, colHints;

    function createGrid() {
      const gridSize = document.getElementById('gridSize').value;
      const inputArea = document.getElementById('inputArea');
      inputArea.style.display = 'block';

      // Create empty hints
      rowHints = Array.from({ length: gridSize }, () => []);
      colHints = Array.from({ length: gridSize }, () => []);
    }

    function initializeGame() {
      const gridSize = document.getElementById('gridSize').value;
      const rowsInput = document.getElementById('rowHints').value.trim();
      const colsInput = document.getElementById('colHints').value.trim();
      const nonogramTable = document.getElementById('nonogramTable');
      const solveButton = document.getElementById('solveButton');

      // Parse row and column hints
      rowHints = rowsInput.split('\n').map(hint => hint.split(',').map(Number));
      colHints = colsInput.split('\n').map(hint => hint.split(',').map(Number));

      // Create empty puzzle
      puzzle = Array.from({ length: gridSize }, () => Array.from({ length: gridSize }, () => 0));

      // Clear the table
      nonogramTable.innerHTML = '';

      for (let i = 0; i <= gridSize; i++) {
        const row = document.createElement('tr');
        for (let j = 0; j <= gridSize; j++) {
          const cell = document.createElement('td');
          if (i === 0 && j === 0) {
            cell.classList.add('number-cell');
          } else if (i === 0) {
            cell.textContent = colHints[j - 1].join(' ');
            cell.classList.add('number-cell');
          } else if (j === 0) {
            cell.textContent = rowHints[i - 1].join(' ');
            cell.classList.add('number-cell');
          } else {
            cell.addEventListener('click', () => toggleCell(i - 1, j - 1));
          }
          row.appendChild(cell);
        }
        nonogramTable.appendChild(row);
      }

      updateGrid();
      solveButton.style.display = 'block';
    }

    function toggleCell(row, col) {
      console.log(puzzle[row][col])
      console.log("Toggle square " + row + ", " + col)
      puzzle[row][col] = 1 - puzzle[row][col];
      updateGrid();
      console.log(puzzle[row][col])
    }

    function updateGrid() {
      for (let i = 0; i < puzzle.length; i++) {
        for (let j = 0; j < puzzle[i].length; j++) {
          const cell = nonogramTable.rows[i + 1].cells[j + 1];
          cell.style.backgroundColor = puzzle[i][j] ? 'black' : 'white';
        }
      }
    }

    function solveNonogram() {
      // Add your solving algorithm here
      // For simplicity, we are just updating the grid to match the solution
      // Replace this with the actual solving logic
      for (let i = 0; i < puzzle.length; i++) {
        for (let j = 0; j < puzzle[i].length; j++) {
          puzzle[i][j] = getSolutionCell(rowHints[i], colHints[j], i, j) ? 1 : 0;
        }
      }
      updateGrid();
    }

    function getSolutionCell(rowHint, colHint, rowIndex, colIndex) {
      // Simplified solving logic
      // Replace this with your own algorithm
      return Math.random() < 0.5; // Randomly fill cells for now
    }
  </script>
</body>
</html>
